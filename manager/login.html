<html>
  <head>
    <meta charset="utf-8" />
    <title>Login</title>
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" />
  </head>
  <body>
    <div class="login">
      <h1>Login</h1>
      <form id="authForm" action="authenticate.php" method="post">
        <label for="username">
          <i class="fas fa-user"></i>
        </label>
        <input
          type="text"
          name="username"
          placeholder="Username"
          id="username"
          required />
        <label for="password">
          <i class="fas fa-lock"></i>
        </label>
        <input
          type="password"
          name="password"
          placeholder="Password"
          id="password"
          required />
        <input type="submit" value="Login" />
      </form>
    </div>

    <a href="register.html">Register</a>

    <script src="https://cdn.faceio.net/fio.js"></script>
    <script type="text/javascript">
      document
        .getElementById("authForm")
        .addEventListener("submit", function (event) {
          // Cache the form element
          var form = event.currentTarget;

          const faceio = new faceIO("fioaf152");

          // Prevent the default form submission
          event.preventDefault();

          alert("Face authentication now starting.");
          faceio;
          // Authenticate a previously enrolled user
          faceio
            .authenticate({
              locale: "auto", // Default user locale
            })
            .then((userData) => {
              console.log("Success, user identified");
              form.submit();
              // Grab the facial ID linked to this particular user which will be same
              // for each of his successful future authentication. FACEIO recommend
              // that your rely on this Facial ID if you plan to uniquely identify
              // all enrolled users on your backend for example.
            })
            .catch((errCode) => {
              alert("Face authentication failed. Please try again.");
              // handle authentication failure. Visit:
              // https://faceio.net/integration-guide#error-codes
              // for the list of all possible error codes
            });
        });
    </script>
  </body>
</html>
